Este proyecto implementa una tienda electr√≥nica completa (e-commerce) con una arquitectura Full-Stack basada en seguridad a nivel de fila (RLS), autenticaci√≥n robusta y dise√±o interactivo.
üèóÔ∏è 1. Arquitectura y Stack Tecnol√≥gicoComponenteTecnolog√≠aJustificaci√≥n y NotasFrontend/UIReact (Vite)Entorno de desarrollo r√°pido y ligero.Estilos/Dise√±oCSS ModulesSoluci√≥n final adoptada para evitar conflictos de compilaci√≥n de PostCSS/Tailwind. Dise√±o responsive y con enfoque visible.Backend/DBSupabaseBackend como Servicio (BaaS) que proporciona PostgreSQL, autenticaci√≥n y almacenamiento (Storage).SeguridadRLS (Row Level Security)Control de acceso estricto implementado directamente en la base de datos (Postgres).BonificacionesOAuth (Google) y Storage de Im√°genesImplementados para la gesti√≥n de usuarios y archivos de productos.üíæ
 2. Modelo de Base de Datos (ERD/Esquema)El modelo es relacional y se basa en la tabla principal perfiles (extensi√≥n de auth.users).
 El Diagrama Entidad-Relaci√≥n (ERD) es el siguiente:
 2.1 Tablas y Relaciones Claveperfiles: Contiene el role (user/admin) y datos extendidos, con FK a auth.users(id).productos: Cat√°logo principal. La columna categoria_id permite NULL para evitar conflictos de inserci√≥n, pero se relaciona con categorias.carritos & items_carrito: Relaci√≥n uno-a-muchos (1:N) donde carritos.user_id es el propietario.pedidos & items_pedido: Almacena el historial de compras del usuario.üîí
  3. Pol√≠ticas de Seguridad (RLS)El acceso se controla mediante la funci√≥n auth.uid() (para propietario) y el reclamo de rol en el JWT (auth.jwt() ->> 'role' = 'admin').TablaOperaci√≥nPol√≠tica AplicadaObjetivo de SeguridadproductosSELECTis_active = TRUEP√∫blico solo ve productos disponibles.productosINSERT/UPDATEauth.jwt() ->> 'role' = 'admin'Solo administradores pueden modificar el cat√°logo.perfilesSELECT/UPDATEauth.uid() = idLos usuarios solo pueden ver y editar su propio perfil.carritosALL (CRUD)auth.uid() = user_idCarrito privado y persistente por usuario logueado.pedidosINSERT / SELECTauth.uid() = user_id o TRUEPermite a cualquier usuario autenticado crear (insertar) su pedido (soluci√≥n al conflicto RLS), y ver solo sus pedidos.storage.objectsINSERT/UPDATE(auth.jwt() ->> 'role') = 'admin'Solo el administrador puede subir archivos.üõ†Ô∏è
   4. Configuraci√≥n e Inicio del Proyecto4.
  1 RequisitosNode.js (v16+)Cuenta de Supabase configurada.Credenciales de Google OAuth (para bonificaci√≥n).
  4.2 Instalaci√≥n LocalClonar el repositorio y navegar a la carpeta:Bashgit clone [URL_DEL_REPOSITORIO]
cd mi-tienda-react
Instalar dependencias:Bashnpm install
Configurar Credenciales: Crear el archivo .env.local en la ra√≠z del proyecto:# .env.local
VITE_SUPABASE_URL="[TU URL DE PROYECTO]"
VITE_SUPABASE_ANON_KEY="[TU CLAVE ANON P√öBLICA]"
Iniciar Desarrollo:Bashnpm run dev
4.3 Scripts SQL para la Configuraci√≥n del ServidorEl esquema fue reconstruido completamente y es funcional. Las pol√≠ticas de RLS y los triggers deben ejecutarse en la secuencia que se encuentra en el archivo adjunto ([NOMBRE_DEL_ARCHIVO].sql).
5. Cuentas de Prueba y EscenariosUtilice estas cuentas para la demostraci√≥n y verificaci√≥n de las pol√≠ticas RLS.RolCorreo Electr√≥nicoContrase√±aEscenario a ProbarADMINadmin.prueba@tienda.com[CONTRASE√ëA_DE_PRUEBA]Panel de Admin (CRUD), Subida de Im√°genes, RLS: Ver todos los productos.USERusuario.demo@tienda.com[CONTRASE√ëA_DE_PRUEBA]Carrito (INSERT/UPDATE/DELETE), Checkout, Historial de Pedidos. RLS: Solo ve productos activos.P√öBLICO(Ninguno)N/ACat√°logo, B√∫squeda, RLS: Solo ve productos activos.Para la demostraci√≥n, primero debe iniciar sesi√≥n como ADMIN para crear categor√≠as y productos.
